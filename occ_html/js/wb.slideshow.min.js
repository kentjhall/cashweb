/*
 * jQuery Slideshow Plugin for WYSIWYG Web Builder 10
 * Copyright Pablo Software solutions 2015
 * http://www.wysiwygwebbuilder.com/
 */
(function(a){a.fn.slideshow=function(b){return this.each(function(){a.slideshow(this,b)})};a.slideshow=function(b,c){var d={effect:"none",effectlength:2E3,easing:"linear",fullscreen:0,direction:"",count:8,interval:2E3,type:"sequence",pagination:!0,pagination_img_default:"",pagination_img_active:"",param:null,maxItems:10,maxWidth:800,current:1,last:0,captionShow:{},captionHide:{}};if(c&&"string"==typeof c)"nextimage"==c?(a.slideshow.killTimer(b),a.slideshow.nextimage(b)):"previmage"==c&&(a.slideshow.killTimer(b),
a.slideshow.previmage(b));else if(c&&(state=a.extend(d,c)),a.slideshow.init(b,state),c.pagination){$pagination=a('<div class="pagination" />');for(var d=a(b).find(".image").get(),e=0;e<d.length;e++){var g=a("<a />").attr("id",String(e+1)).css("cursor","pointer");a("<img />").attr({id:"page_"+String(e+1),src:c.pagination_img_default}).appendTo(g);g.click(function(){a.slideshow.gotoImage(b,a(this).attr("id"))});g.appendTo($pagination)}$pagination.appendTo(a(b));a.slideshow.updateNavigation(b,0,state.last)}};
a.slideshow.init=function(b,c){var d=a(".caption_text").length;c.images=a(b).find(".image");a.each(c.images,function(b){a(c.images[b]).css("zIndex",0).css("position","absolute").css("top","0").css("left","0");d&&(a(c.images[b]).data("title",a(c.images[b]).attr("title")),a(c.images[b]).removeAttr("title"))});c.random=!1;c.reverse=!1;"random"==c.effect&&(c.random=!0);a(b).data("state",c);a.isEmptyObject(c.captionShow)||a(b).mouseover(function(){a(b).find(".caption_background").stop().animate(c.captionShow,
500)});a.isEmptyObject(c.captionHide)||a(b).mouseout(function(){a(b).find(".caption_background").stop().animate(c.captionHide,500)});var e=c.interval;"kenburns"==c.effect&&(e=1);0!=e&&(e=setTimeout(function(){a.slideshow.imagetransition(b)},e),a(b).data("timerId",e));0!=c.fullscreen&&(a(window).resize(function(){a.slideshow.resize(b)}),a(window).load(function(){a.slideshow.resize(b)}));setTimeout(function(){a(b).trigger("activate",0)},10)};a.slideshow.killTimer=function(b){b=a(b).data("timerId");
clearInterval(b)};a.slideshow.updateNavigation=function(b,c,d){var e=a(b).data("state");a(b).parent().find(".pagination img:eq("+c+")").attr("src",e.pagination_img_default);a(b).parent().find(".pagination img:eq("+d+")").attr("src",e.pagination_img_active)};a.slideshow.gotoImage=function(b,c){a.slideshow.killTimer(b);var d=a(b).data("state");0!=d.interval&&(d.current--,0>d.current&&(d.current=d.images.length-1));c-1!=d.current&&(0==d.interval&&(d.last=d.current),d.current=Math.min(c-1,d.images.length-
1),d.interval=0,d.pagination&&a.slideshow.updateNavigation(b,d.last,d.current),a.slideshow.imagetransition(b),d.last=d.current)};a.slideshow.nextimage=function(b){state=a(b).data("state");0!=state.interval&&(state.current=state.last);state.interval=0;a.slideshow.next(state);a.slideshow.imagetransition(b)};a.slideshow.previmage=function(b){state=a(b).data("state");0!=state.interval&&(state.current=state.last);state.interval=0;0<=state.current-1?(--state.current,state.last=state.current+1):(state.current=
state.images.length-1,state.last=0);a.slideshow.imagetransition(b)};a.slideshow.next=function(a){if("sequence"==a.type)a.current+1<a.images.length?(a.current+=1,a.last=a.current-1):(a.current=0,a.last=a.images.length-1);else if("random"==a.type)for(a.last=a.current;a.current==a.last;)a.current=Math.floor(Math.random()*a.images.length)};a.slideshow.imagetransition=function(b){state=a(b).data("state");if(state.random){var c="fade slide puff blind drop zoom clip shuffle blast blocks rain swirl squares bars".split(" "),
d=["left","up","down","right"],e=["horizontal","vertical"];state.effect=c[Math.floor(Math.random()*c.length)];if("slide"==state.effect||"drop"==state.effect)state.direction=d[Math.floor(Math.random()*d.length)];if("clip"==state.effect||"blinds"==state.effect||"bars"==state.effect)state.direction=e[Math.floor(Math.random()*e.length)]}for(c=0;c<state.images.length;c++)a(state.images[c]).css("display","none");a(state.images[state.last]).css("display","block").css("zIndex","0");state.active=state.current;
state.pagination&&a.slideshow.updateNavigation(b,state.last,state.current);if("none"==state.effect)a(state.images[state.current]).css("zIndex","1").show(),a(state.images[state.last]).css("display","none"),a(b).trigger("activate",state.current);else if("fade"==state.effect)a(state.images[state.last]).fadeOut(state.effectlength),a(state.images[state.current]).css("zIndex","1").css("display","block").hide().fadeIn(state.effectlength,function(){a(b).trigger("activate",state.active)});else if("slide"==
state.effect)a(state.images[state.current]).css("zIndex","1").show("slide",{direction:state.direction,easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)});else if("puff"==state.effect)a(state.images[state.current]).css("zIndex","1").show("puff",{easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)});else if("blind"==state.effect)a(state.images[state.current]).css("zIndex","1").show("blind",{direction:state.direction,easing:state.easing},
state.effectlength,function(){a(b).trigger("activate",state.active)});else if("clip"==state.effect)a(state.images[state.current]).css("zIndex","1").show("clip",{direction:state.direction,easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)});else if("drop"==state.effect)a(state.images[state.current]).css("zIndex","1").show("drop",{direction:state.direction,easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)});else if("fold"==
state.effect)a(state.images[state.current]).css("zIndex","1").show("fold",{easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)});else if("kenburns"==state.effect){var d=a(b).outerWidth(),c=a(b).outerHeight(),e=Math.ceil(d/10),g=d,f=c,h=Math.floor(4*Math.random()),l=Math.floor(2*Math.random()),k=1;g<d+e?k=f<c+e?Math.max((c+e)/f,(d+e)/g):(d+e)/g:f<c+e&&(k=(c+e)/f);g*=k;f*=k;0==h||3==h?(leftStart=-e,leftEnd=d-g+e):(leftStart=d-g+e,leftEnd=-e);1==h||3==h?(topStart=
-e,topEnd=c-f+e):(topStart=c-f+e,topEnd=-e);1==l?(widthStart=1.2*g,widthEnd=g,heightStart=1.2*f,heightEnd=f):(widthStart=g,widthEnd=1.2*g,heightStart=f,heightEnd=1.2*f);a(state.images[state.current]).css("display","block").css("zIndex","1").css({opacity:0,position:0==state.fullscreen||4==state.fullscreen||5==state.fullscreen?"absolute":"fixed",left:Math.ceil(leftStart),top:Math.ceil(topStart),width:Math.ceil(widthStart),height:Math.ceil(heightStart)}).animate({opacity:1},2E3).animate({left:Math.ceil(leftEnd),
top:Math.ceil(topEnd),width:Math.ceil(widthEnd),height:Math.ceil(heightEnd)},{duration:state.effectlength,queue:!1}).css({width:d,height:c});a(b).trigger("activate",state.active)}else if("zoom"==state.effect)e=a(state.images[state.last]).outerWidth(),g=a(state.images[state.last]).outerHeight(),d=a(b).outerWidth(),c=a(b).outerHeight(),d=(d-e)/2,f=(c-g)/2,0!=state.fullscreen&&(f=0),c={top:f,left:d,width:e,height:g},d={width:0,height:0,top:f+g/2,left:d+e/2},a(state.images[state.current]).animate(d,0,
null),a(state.images[state.current]).css("display","block").css("zIndex","1"),a(state.images[state.current]).animate(c,state.effectlength,function(){a(b).trigger("activate",state.active)});else if("zoominout"==state.effect)e=a(state.images[state.last]).outerWidth(),g=a(state.images[state.last]).outerHeight(),d=a(b).outerWidth(),c=a(b).outerHeight(),d=(d-e)/2,f=(c-g)/2,0!=state.fullscreen&&(f=0),c={top:f,left:d,width:e,height:g},d={width:0,height:0,top:f+g/2,left:d+e/2},a(state.images[state.last]).animate(d,
state.effectlength,null),a(state.images[state.current]).animate(d,0,null),a(state.images[state.current]).css("display","block").css("zIndex","1"),a(state.images[state.current]).animate(c,state.effectlength,function(){a(b).trigger("activate",state.active)});else{if("shuffle"==state.effect){c=a(b).outerWidth();d=a(b).outerHeight();a(state.images[state.last]).css("zIndex","1");a(state.images[state.current]).css("zIndex","0");a(state.images[state.current]).show();a(state.images[state.current]).animate({translateX:c,
translateY:-d,rotate:45},{duration:state.effectlength/2,easing:state.easing,queue:!0,complete:function(){a(state.images[state.last]).css("zIndex","0");a(state.images[state.current]).css("zIndex","1");a(state.images[state.current]).animate({rotate:"0deg",translateX:"0",translateY:"0"},{duration:state.effectlength/2,easing:state.easing,queue:!0,complete:function(){var c=a(state.images[state.current]).data("title");a(b).find(".caption_text").text(c);a(b).trigger("activate",state.active);0!=state.interval&&
(a.slideshow.next(state),c=setTimeout(function(){a.slideshow.imagetransition(b)},state.interval),a(b).data("timerId",c))}})}});return}"rotate"==state.effect?(a(state.images[state.last]).animate({rotate:180,scale:10,opacity:"hide"},{duration:state.effectlength,easing:state.easing}),a(state.images[state.current]).css("zIndex","1"),a(state.images[state.current]).css({scale:10,rotate:-180}),a(state.images[state.current]).animate({opacity:"show",rotate:0,scale:1},{duration:state.effectlength,easing:state.easing,
complete:function(){a(b).trigger("activate",state.active)}})):"blast"==state.effect?(a(state.images[state.last]).css("zIndex","1"),a(state.images[state.last]).css("zIndex","0"),a(state.images[state.last]).hide(state.effect,{easing:state.easing,pieces:16},state.effectlength),a(state.images[state.last]).css("visibility","visible"),a(state.images[state.current]).show(state.effect,{easing:state.easing,pieces:16},state.effectlength,function(){a(b).trigger("activate",state.active)})):"explode"==state.effect?
(a(state.images[state.last]).css("zIndex","1"),a(state.images[state.last]).css("zIndex","0"),a(state.images[state.last]).hide(state.effect,{easing:state.easing,pieces:25},state.effectlength),a(state.images[state.last]).css("visibility","visible"),a(state.images[state.current]).show("fade",{},state.effectlength,function(){a(b).trigger("activate",state.active)})):"blocks"==state.effect?a(state.images[state.current]).css("zIndex","1").show("squares",{easing:state.easing,fx:"random"},state.effectlength,
function(){a(b).trigger("activate",state.active)}):"rain"==state.effect?(a(state.images[state.current]).css("zIndex","1").show("squares",{easing:state.easing,fx:"rain",reverse:state.reverse},state.effectlength,function(){a(b).trigger("activate",state.active)}),state.reverse=!state.reverse):"swirl"==state.effect?(a(state.images[state.current]).css("zIndex","1").show("squares",{easing:state.easing,fx:"swirl",reverse:state.reverse},state.effectlength,function(){a(b).trigger("activate",state.active)}),
state.reverse=!state.reverse):"squares"==state.effect?(a(state.images[state.current]).css("zIndex","1").show("squares",{easing:state.easing,fx:"none",reverse:state.reverse},state.effectlength,function(){a(b).trigger("activate",state.active)}),state.reverse=!state.reverse):"bars"==state.effect?a(state.images[state.current]).css("zIndex","1").show("bars",{pieces:state.count,direction:state.direction,easing:state.easing},state.effectlength,function(){a(b).trigger("activate",state.active)}):"bounce"==
state.effect?a(state.images[state.current]).css("zIndex","1").show("bounce",{direction:state.direction},state.effectlength,function(){a(b).trigger("activate",state.active)}):a(state.images[state.current]).css("zIndex","1").show(state.effect,{},state.effectlength,function(){a(b).trigger("activate",state.active)})}c=a(state.images[state.current]).data("title");a(b).find(".caption_text").text(c);0!=state.interval&&(a.slideshow.next(state),c=setTimeout(function(){a.slideshow.imagetransition(b)},state.interval),
a(b).data("timerId",c))};a.slideshow.resize=function(b){var c=a(b).data("state"),d=0,e=0;"undefined"!=typeof window.innerWidth?(d=window.innerWidth,e=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(d=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(d=document.getElementsByTagName("body")[0].clientWidth,e=document.getElementsByTagName("body")[0].clientHeight);
4==c.fullscreen?(d=a(b).parent().innerWidth(),e=a(b).parent().innerHeight()):5==c.fullscreen&&(d=a(b).parent().innerWidth(),e=a(b).innerHeight(),a(b).css("overflow","hidden"));"kenburns"==c.effect&&(c.fullscreen=1);1==c.fullscreen&&a(b).css("height",e);a(b).css("width","100%");a(b).css("left","0");5!=c.fullscreen&&a(b).css("top","0");a(b).find(".image").each(function(){var g=e,f=d,h=0,l=0;if(4==c.fullscreen)f>c.maxWidth&&(f=c.maxWidth),a(this).css({height:"auto",width:f+"px"}),a(this).css({position:"absolute",
left:h+"px",top:l+"px"}),a(b).css("height",a(this).innerHeight()),d>f&&(h=(d-a(this).width())/2,a(this).css({left:h+"px"}));else{var k=!1;(k=5==c.fullscreen?!(f/g<a(this).width()/a(this).height()):f/g>a(this).width()/a(this).height())?1==c.fullscreen?a(this).css({height:g+"px",width:"auto"}):2!=c.fullscreen&&5!=c.fullscreen||a(this).css({height:"auto",width:f+"px"}):1==c.fullscreen?a(this).css({height:"auto",width:f+"px"}):2!=c.fullscreen&&5!=c.fullscreen||a(this).css({height:g+"px",width:"auto"});
1==c.fullscreen?(h=(d-a(this).width())/2,l=(e-a(this).height())/2):3==c.fullscreen&&a(this).css({height:g+"px",width:f+"px"});5!=c.fullscreen&&a(this).css({position:"fixed",left:h+"px",top:l+"px"})}})}})(jQuery);